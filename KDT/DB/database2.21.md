# SQL - Advanced 02

<br/>

## Normalization
- RDB 설계 단계에서 중복을 최소화하여 데이터를 구조화하는 과정

<br/>

### 제 1 정규화
- 데이터베이스의 각 필드에는 하나의 값만 저장해야 함
- 유사하게 정보를 저장하는 두 개의 필드가 있어서는 안됨
  - 반복되는 부분을 찾아 테이블을 분할하고 기본키가 될 필드를 작성

<br/>

|주문번호|날짜|이름|연락처|주문상품|
|--|--|--|--|--|
|1|1/5|영자|010-xxx|0001 책상 1개, 0002 시계 10개|
|2|2/1|혜지|017-xxx|0001 책상 2개, 0002 시계 3개|
|3|2/5|영자|010-xxx|0001 책상 3개, 0003 가위 1개|

-----------------------

|주문번호|날짜|이름|연락처|상품코드|상품명|개수|
|--|--|--|--|--|--|--|
|1|1/5|영자|010-xxx|0001|책상|1|
|1|1/5|영자|010-xxx|0002|시계|10|
|2|2/1|혜지|017-xxx|0001|책상|2|
|2|2/1|혜지|017-xxx|0002|시계|3|
|3|2/5|영자|010-xxx|0001|책상|3|
|3|2/5|영자|010-xxx|0003|가위|1|

|주문번호|날짜|이름|연락처|
|--|--|--|--|
|1|1/5|영자|010-xxx|
|2|2/1|혜지|017-xxx|
|3|2/5|영자|010-xxx|

|주문번호|상품코드|상품명|개수|
|--|--|--|--|
|1|0001|책상|1|
|1|0002|시계|10|
|2|0001|책상|2|
|2|0002|시계|3|
|3|0001|책상|3|
|3|0003|가위|1|

<br/>

### 제 2 정규화
- 키 값을 이용해 데이터를 특정 지을 수 있는 것(함수 종속성)을 찾아 테이블을 분할

<br/>

|주문번호|상품코드|상품명|개수|
|--|--|--|--|
|1|0001|책상|1|
|1|0002|시계|10|
|2|0001|책상|2|
|2|0002|시계|3|
|3|0001|책상|3|
|3|0003|가위|1|

---------------

|주문번호|상품코드|개수|
|--|--|--|
|1|0001|1|
|1|0002|10|
|2|0001|2|
|2|0002|3|
|3|0001|3|
|3|0003|1|

|상품코드|상품명|
|--|--|
|0001|책상|
|0002|시계|
|0003|가위|

<br/>

### 제 3정규화
- 기본 키 이외의 부분에서 중복이 없는 지를 조사 하여 테이블을 분할

<br/>

|주문번호|날짜|이름|연락처|
|--|--|--|--|
|1|1/5|영자|010-xxx|
|2|2/1|혜지|017-xxx|
|3|2/5|영자|010-xxx|

------

|주문번호|날짜|고객번호|
|--|--|--|
|1|1/5|1|
|2|2/1|2|
|3|2/5|1|

|고객번호|이름|연락처|
|--|--|--|
|1|영자|010-xxx|
|2|혜지|017-xxx|

<br/>

### 정규화 전

<br/>

|주문번호|날짜|이름|연락처|주문상품|
|--|--|--|--|--|
|1|1/5|영자|010-xxx|0001 책상 1개, 0002 시계 10개|
|2|2/1|혜지|017-xxx|0001 책상 2개, 0002 시계 3개|
|3|2/5|영자|010-xxx|0001 책상 3개, 0003 가위 1개|

<br/>

### 정규화 후

<br/>

|주문번호|날짜|고객번호|
|--|--|--|
|1|1/5|1|
|2|2/1|2|
|3|2/5|1|

|고객번호|이름|연락처|
|--|--|--|
|1|영자|010-xxx|
|2|혜지|017-xxx|

|주문번호|상품코드|개수|
|--|--|--|
|1|0001|1|
|1|0002|10|
|2|0001|2|
|2|0002|3|
|3|0001|3|
|3|0003|1|

|상품코드|상품명|
|--|--|
|0001|책상|
|0002|시계|
|0003|가위|

<br/>

### 정규화 목적
- 데이터를 쉽게 관리하기 위해
  - 하나의 데이터를 무조건 한 곳에만 위치하도록
  - 테이블 간의 관계는 키를 통해 형성
  - 데이터를 변경하더라도 한 곳만 변경하는 구조 확립

<br/>

## Data Modeling
- 데이터베이스 시스템을 시각적으로 표현하는 프로세스
  - for 데이터 유형, 데이터 간의 관계 및 분석 등을 통해 비즈니스 요구사항을 만들어 낼 수 있도록 도움

<br/>

### ER(Entity-Relationship) Diagram
- 다이어그램을 사용하여 데이터베이스의 Entity간 관계를 나타내는 방법
- 구성 요소
  - (Square)Entity => Table
  - (Circle)Attribute => Field
  - (Rhombus)Relation => PK, FK

<br/>

### ER Diagram 작성 예시
![ER](https://raw.githubusercontent.com/Code-Sloth/TIL/master/image/database2.21.png)

<br/>

### Relationship 표현 방법
- Cardinality(1:1, N:1, N:M) & Optionality(필수, 선택)
- ex) 하나의 회원은 여러 개의 글을 작성할 수 있고, 하나의 글은 한 명의 회원이 작성할 수 있다
  - 회원과 글의 관계는 1:N이며, 글은 필수적으로 회원과 연결되어야 하지만 회원은 선택적으로 글과 연결될 수 있는 관계

<br/>

### 데이터 모델링의 중요성
- 데이터베이스 소프트웨어 개발 오류 감소
- 데이터베이스 설계 및 생성 속도와 효율성 촉진
- 조직 전체에서 데이터 문서화 및 시스템 설계의 일관성 조성
- 데이터 엔지니어와 비즈니스 팀 간의 커뮤니케이션 촉진

<br/>

### ERD 작성 사이트
- [APP Diagrams](https://app.diagrams.net/)
- [ERD Cloud](https://www.erdcloud.com/)
